services:
  client:
    build: ./client
    ports:
      - "3000:3000"
    networks:
      - caddy_network
    container_name: app_client_server
    # volumes:
      # - ./Shared:/Shared

  go-server:
    build: ./go-server
    ports:
      - "8080:8080"
    networks:
      - caddy_network
    container_name: go_server

  btcd:
    build: ./application/btcd
    ports:
      - "8333:8333"
      - "8334:8334"
    networks:
      - caddy_network
    container_name: btcd_node

  btcwallet:
    build: ./application/btcwallet
    ports:
      - "8334:8334"
    networks:
      - caddy_network
    container_name: btcwallet_node

  caddy:
    build:
      context: ./Caddy
    container_name: caddy_server
    ports:
      - "5000:5000"
    networks:
      - caddy_network
    restart: unless-stopped
    # volumes:
      # - ./Shared:/Shared

  ipfs-server:
    build: ./IPFS-Server
    container_name: ipfs_server
    ports:
      - "4001:4001"
      - "5001:5001"
      - "8080:8080"
    volumes:
      - ./ipfs-server-data:/data/ipfs
      - type: bind
        source: ./Shared
        target: /Shared
        read_only: false
    networks:
      - caddy_network


networks:
  caddy_network:
    driver: bridge
